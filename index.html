<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <meta name="mobile-web-app-capable" content="yes">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="60 вопросов">
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <title>Экзамен по истории</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        html, body {
            background-color: #000;
            color: #fff;
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
        }
        
        .questions-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            flex: 1;
            width: 100%;
            gap: 0;
        }
        
        .question-btn {
            background: transparent;
            color: #fff;
            font-size: 7vmin;
            font-weight: 100;
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            margin: 0;
            width: 100%;
            height: 100%;
            outline: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 100;
            overflow: auto;
            padding: 0;
            margin: 0;
            flex-direction: column;
            justify-content: center;
        }
        
        .modal-content {
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
            padding: 5vmin;
            box-sizing: border-box;
            justify-content: space-between;
        }
        
        .question-number {
            font-size: 8vmin;
            font-weight: 100;
            color: #656565;
            text-align: center;
            padding: 3vmin 0;
            position: absolute;
            top: 0;
            width: 100%;
            left: 0;
        }
        
        .question-text {
            font-size: 7vmin;
            line-height: 1.4;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 5vmin;
            font-weight: 300;
            flex-grow: 1;
        }
        
        .close-btn {
            position: absolute;
            top: 2vmin;
            right: 2vmin;
            color: #656565;
            background: transparent;
            border: none;
            font-size: 15vmin;
            cursor: pointer;
            z-index: 101;
            width: 20vmin;
            height: 20vmin;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.7;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 3vmin 0;
        }
        
        .nav-btn {
            background: transparent;
            color: white;
            border: none;
            padding: 4vmin;
            cursor: pointer;
            font-size: 8vmin;
            flex-grow: 1;
            text-align: center;
            opacity: 0.7;
        }
        
        .nav-btn:disabled {
            opacity: 0.3;
        }
        
        .version-footer {
            width: 100%;
            text-align: center;
            padding: 5px;
            font-size: 12px;
            color: #555;
            background-color: transparent;
        }
        
        @media (orientation: landscape) {
            .questions-grid {
                grid-template-columns: repeat(10, 1fr);
            }
        }
        
        @media (min-width: 768px) and (orientation: portrait) {
            .questions-grid {
                grid-template-columns: repeat(8, 1fr);
            }
            
            .question-btn {
                font-size: 8vmin;
            }
        }
    </style>
</head>
<body>
    <div class="questions-grid" id="questionsContainer">
    </div>
    
    <div class="version-footer">v1.0.2</div>
    
    <div class="modal" id="questionModal">
        <button class="close-btn" id="closeModal">&times;</button>
        <div class="modal-content">
            <div class="question-number">Билет <span id="modalQuestionNumber">1</span></div>
            <div class="question-text" id="questionContent">
            </div>
            <div class="navigation">
                <button class="nav-btn" id="prevBtn">←</button>
                <button class="nav-btn" id="nextBtn">→</button>
            </div>
        </div>
    </div>
    
    <script>
        const questions = [
            "<b>encoding</b> double", "Test"
        ]
        
        let currentQuestion = 0;
        let touchStartX = 0;
        let contentHidden = false;
        let lastTap = 0;
        let tapTimeout;
        
        function openQuestionModal(index) {
            currentQuestion = index;
            document.getElementById('modalQuestionNumber').textContent = index + 1;
            document.getElementById('questionContent').innerHTML = questions[index]; 
            document.getElementById('questionModal').style.display = 'flex';
            
            document.getElementById('prevBtn').disabled = index === 0;
            document.getElementById('nextBtn').disabled = index === questions.length - 1;
        }
        
        function closeQuestionModal() {
            document.getElementById('questionModal').style.display = 'none';
        }
        
        function toggleContent() {
            contentHidden = !contentHidden;
            
            if (contentHidden) {
                document.getElementById('questionsContainer').style.visibility = 'hidden';
                document.querySelector('.version-footer').style.visibility = 'hidden';
                if (document.getElementById('questionModal').style.display === 'flex') {
                    document.getElementById('questionModal').style.visibility = 'hidden';
                }
            } else {
                document.getElementById('questionsContainer').style.visibility = 'visible';
                document.querySelector('.version-footer').style.visibility = 'visible';
                if (document.getElementById('questionModal').style.display === 'flex') {
                    document.getElementById('questionModal').style.visibility = 'visible';
                }
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('questionsContainer');
            
            for (let i = 0; i < 60; i++) {
                const button = document.createElement('button');
                button.className = 'question-btn';
                button.textContent = i + 1;
                button.addEventListener('click', () => openQuestionModal(i));
                container.appendChild(button);
            }
            
            document.getElementById('closeModal').addEventListener('click', closeQuestionModal);
            
            document.getElementById('prevBtn').addEventListener('click', function() {
                if (currentQuestion > 0) {
                    openQuestionModal(currentQuestion - 1);
                }
            });
            
            document.getElementById('nextBtn').addEventListener('click', function() {
                if (currentQuestion < questions.length - 1) {
                    openQuestionModal(currentQuestion + 1);
                }
            });
            
            document.addEventListener('keydown', function(event) {
                if (document.getElementById('questionModal').style.display === 'flex') {
                    if (event.key === 'ArrowLeft' && currentQuestion > 0) {
                        openQuestionModal(currentQuestion - 1);
                    } else if (event.key === 'ArrowRight' && currentQuestion < questions.length - 1) {
                        openQuestionModal(currentQuestion + 1);
                    } else if (event.key === 'Escape') {
                        closeQuestionModal();
                    }
                }
            });
            
            document.addEventListener('touchstart', function(e) {
                touchStartX = e.touches[0].clientX;
            });
            
            document.addEventListener('touchend', function(e) {
                if (document.getElementById('questionModal').style.display !== 'flex') return;
                
                const touchEndX = e.changedTouches[0].clientX;
                const diffX = touchStartX - touchEndX;
                
                if (Math.abs(diffX) > 50) {
                    if (diffX > 0 && currentQuestion < questions.length - 1) {
                        openQuestionModal(currentQuestion + 1);
                    } else if (diffX < 0 && currentQuestion > 0) {
                        openQuestionModal(currentQuestion - 1);
                    }
                }
            });
        });
        
        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });

        document.body.addEventListener('touchstart', function(e) {
            if (e.touches.length === 2) {
                e.preventDefault();
                toggleContent();
            }
        });
        
        document.addEventListener('dblclick', function() {
            toggleContent();
        });
    </script>
</body>
</html>